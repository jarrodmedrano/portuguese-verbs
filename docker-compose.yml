x-aws-vpc: ${AWS_VPC}
x-aws-cluster: ${AWS_ECS_CLUSTER}
x-aws-loadbalancer: ${AWS_ELB}

services:
  verbecc:
    extends:
      file: common-services.yml
      service: verbecc
  api:
    extends:
      file: common-services.yml
      service: api
      image: ${IMAGE_URI:-api}:${IMAGE_TAG:-latest}
      build: ./packages/api
  client:
    extends:
      file: common-services.yml
      service: client
      image: ${IMAGE_URI:-client}:${IMAGE_TAG:-latest}
      build: ./packages/client

# Define a network, which allows containers to communicate
# with each other, by using their container name as a hostname
networks:
  app_network:
    external: true
